pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function class(tab)
	local tabnew=function(tab,...)
	 local n={}
		setmetatable(n,{__index=tab})
		if tab.construct then
			tab.construct(n,...)
		end
		return n
	end
	setmetatable(tab,{__call=tabnew})
	return tab
end

function interface(tab)
	local tabcheck=function(tab,check)
		for k,v in pairs(tab) do
			if type(check[k])~=v then
				cls()
				print("interface err: "..tostr(check))
				print("expected "..k.." type "..v)
				print("got "..type(check[k]))
				assert(false)
			end
		end
	end
	setmetatable(tab,{__call=tabcheck})
	return tab
end

square=class{
	x=0,
	y=0,
	w=2,
	construct=function(sq,x,y)
		sq.x=x
		sq.y=y
	end,
}

cls()

sq=square(1,2)

spatial=interface{
	x="number",
	y="function",
}
spatial(square)
spatial(sq)

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
